{% extends "base.html" %}

{% block title %}Profile - ConnectU{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <div class="avatar">
            <img src="{{ user.avatar_url or url_for('static', filename='default-avatar.png') }}" alt="Avatar">
        </div>
        <div class="profile-info">
            <h2>{{ user.username }}</h2>
            <p>{{ user.email }}</p>
        </div>
    </div>
<div class="profile-details">
    <h3>Bio</h3>
    <p>{{ user.bio or "No bio yet." }}</p>

    <h3>Availability</h3>
    <p>{{ user.availability or "Not set yet." }}</p>

    <h3>Personal Links</h3>
    {% if user.personal_links %}
        <ul>
        {% for link in user.personal_links.split(',') %}
            <li><a href="{{ link.strip() }}" target="_blank">{{ link.strip() }}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No links provided.</p>
    {% endif %}
</div>


    <div class="profile-actions">
        <a href="{{ url_for('edit_profile') }}" class="btn-primary">Edit Profile</a>
        <a href="{{ url_for('messaging.direct_message', recipient_id=user.id) }}" class="btn-secondary">Message</a>
    </div>

    <!-- Joined Classes -->
    <div class="profile-classes">
        <h3>Joined Classes</h3>
        {% if user_courses %}
            <ul>
            {% for c in user_courses %}
                <li>
                    <a href="{{ url_for('course_detail', course_code=c.course_code) }}">
                        {{ c.course_code }} - {{ c.title }}
                    </a>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>You haven't joined any classes yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
