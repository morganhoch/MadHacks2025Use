{% extends "base.html" %}

{% block title %}Edit Profile - ConnectU{% endblock %}

{% block content %}
<div class="profile-container">
    <h2>Edit Profile</h2>
    <form method="POST" class="edit-form">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" value="{{ user.username }}" required>

        <label for="bio">Bio</label>
        <textarea name="bio" id="bio" rows="4">{{ user.bio }}</textarea>

        <label>Availability</label>
        <div class="availability-section">
          <h4>Which days are you typically available?</h4>
          <div class="days-list">
            {% for day in ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"] %}
              <label class="day-block">
                <input type="checkbox" name="available_days" value="{{ day }}"
                    {% if day in (user.available_days or []) %}checked{% endif %}>
                {{ day }}
              </label>
            {% endfor %}
          </div>
        
          <h4>Choose times for each day</h4>
          {% for day in ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"] %}
            <div class="day-time-block">
              <h5>{{ day }}</h5>
              <div class="time-blocks">
                {% for period, hours in [
                    ('Morning', '6AM–12PM'),
                    ('Afternoon', '12PM–6PM'),
                    ('Evening', '6PM–12AM'),
                    ('Midnight', '12AM–6AM')
                  ] %}
                  <label class="time-block">
                    <input type="checkbox" name="available_times[{{ day }}][]" value="{{ period }}"
                       {% if user.available_times and user.available_times.get(day) and (period in user.available_times.get(day)) %}checked{% endif %}>
                    {{ period }} <span class="timing">{{ hours }}</span>
                  </label>
                {% endfor %}
              </div>
            </div>
          {% endfor %}
        </div>
        

        <label for="personal_links">Personal Links</label>
        <textarea name="personal_links" id="personal_links" rows="3" placeholder="Zoom, LinkedIn, etc.">{{ user.personal_links or '' }}</textarea>

        <label>Choose an Avatar</label>
        <div class="avatar-options">
        <label>
              <input type="radio" name="avatar_url" value="{{ url_for('static', filename='avatar1.png') }}"
            {% if user.avatar_url == url_for('static', filename='avatar1.png') %}checked{% endif %}>
        <img src="{{ url_for('static', filename='avatar1.png') }}" alt="Avatar 1" class="avatar-choice">
        </label>

        <label>
        <input type="radio" name="avatar_url" value="{{ url_for('static', filename='avatar2.png') }}"
            {% if user.avatar_url == url_for('static', filename='avatar2.png') %}checked{% endif %}>
        <img src="{{ url_for('static', filename='avatar2.png') }}" alt="Avatar 2" class="avatar-choice">
        </label>

        <label>
        <input type="radio" name="avatar_url" value="{{ url_for('static', filename='avatar3.png') }}"
            {% if user.avatar_url == url_for('static', filename='avatar3.png') %}checked{% endif %}>
        <img src="{{ url_for('static', filename='avatar3.png') }}" alt="Avatar 3" class="avatar-choice">
        </label>
        </div> 

        <button type="submit" class="btn-primary">Save Changes</button>
        <a href="{{ url_for('profile') }}" class="btn-secondary">Cancel</a>
    </form>
</div>
{% endblock %}
